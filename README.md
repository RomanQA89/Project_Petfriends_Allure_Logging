# Проект по автоматизации тестирования API сайта https://petfriends.skillfactory.ru/.

При проектирований автотестов были применены фреймворки Pytest и Allure Report.
После запуска автотестов автоматически создается файл log.txt, где записываются все HTTP запросы и ответы.
Представлено 725 тестов в проекте, 6 позитивных и 719 негативных, в некоторых тестах применена параметризация через декоратор pytest.mark.parametrize.

Основная директория проекта содержит файлы:

- api.py - API библиотека;
- conftest.py - фикстуры для работы с тестами;
- pytest.ini - маркеры для параметризации;
- requirements.txt - используемые при тестировании библиотеки PyCharm;
- settings.py - учетные данные, используемые в процессе тестов;
- log.txt - записи логов API запросов и ответов (появляется после запуска автотестов);
- Makefile - файл с инструкциями для утилиты make, содержит список коротких команд для удобства запуска тестов;
- allure-results - папка со сгенерированными отчетами (появляется после запуска команды allure serve allure-results или make result);
- allure-reports - папка с отчетами по тестам для экспорта (появляется после запуска команды allure generate -c ./allure-results -o ./allure-report или make report).

Папка tests содержит:

- папка images с фотографиями питомцев в формате jpg;
- log_decorator.py - декоратор для записи логов в файл log.txt;
- test.py - файл с тестами.

  Для подготовки к запуску автотестов необходимо установить необходимые библиотеки PyCharm с помощью вводимой команды в консоли терминала:

       pip install -r requirements.txt

  Также необходимо ввести валидные данные уже авторизованного пользователя на сайте в файл .env и установить утилиту Allure Report для успешного прохождения автотестов.
  

  Для простого запуска автотестов с логированием необходимо вводить команды в консоли терминала.
  

1. Для всех позитивных API тестов:

       pytest -v tests/test.py -k positive

2. Для всех негативных API тестов:

       pytest -v tests/test.py -k negative

3. Для запуска всех тестов:

       pytest -v tests/test.py


Для запуска автотестов с логированием и создания отчетности Allure необходимо вводить команды в консоли терминала.


1. Для всех позитивных API тестов:

       pytest -v tests/test.py -k positive --alluredir allure-results

2. Для всех негативных API тестов:

       pytest -v tests/test.py -k negative --alluredir allure-results

3. Для запуска всех тестов:

       pytest -v tests/test.py --alluredir allure-results
   
4. Для генерации локального Allure сервера и просмотра отчетности Allure Report:

       allure serve allure-results

5. Для экспорта Allure отчетов проведенных тестов:

       allure generate -c ./allure-results -o ./allure-report

Также имеется возможность упрощенного запуска тестов через Makefile, только нужно установить утилиту make на свою ОС.

1. Для позитивных тестов:

       make tests_pos

2. Для негативных тестов:

       make tests_neg

3. Для всех тестов:

       make tests_all

4. Для поднятия локального allure сервера и просмотра тестовых отчетов:

       make result

5. Для экспорта отчетов allure:

       make report

Окружение: Google Chrome Версия 122, Python 3.11, Windows 11 Home (64 бит)
